"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7450],{7450:(M,v,r)=>{r.r(v),r.d(v,{FaviritosPageModule:()=>R});var a=r(2881),x=r(9417),l=r(7343),_=r(9870),b=r(467),t=r(1360),P=r(5806),u=r(9557),h=r(2381),m=r(9847),d=r(4371),f=r(7677);const C=["pageContent"];function F(e,p){if(1&e){const s=t.RV6();t.qex(0),t.j41(1,"app-cartas",9),t.bIt("refrescarAutos",function(i){t.eBV(s);const n=t.XpG();return t.Njj(n.handleRefrescarAutos(i))}),t.k0s(),t.bVm()}if(2&e){const s=p.$implicit;t.R7$(),t.Y8G("auto",s)("ubicacion","favoritos")}}function O(e,p){if(1&e){const s=t.RV6();t.j41(0,"button",17),t.bIt("click",function(){t.eBV(s);const i=t.XpG().$implicit,n=t.XpG(2);return t.Njj(n.cambiarPagina(i))}),t.EFF(1),t.k0s()}if(2&e){const s=t.XpG().$implicit,o=t.XpG(2);t.AVh("activa",o.paginaActual===s),t.R7$(),t.SpI(" ",s," ")}}function A(e,p){1&e&&(t.j41(0,"span",18),t.EFF(1," ... "),t.k0s())}function y(e,p){if(1&e&&(t.qex(0),t.DNE(1,O,2,3,"button",15)(2,A,2,0,"span",16),t.bVm()),2&e){const s=p.$implicit,o=t.XpG(2);t.R7$(),t.Y8G("ngIf",o.esNumero(s)),t.R7$(),t.Y8G("ngIf",!o.esNumero(s))}}function w(e,p){if(1&e){const s=t.RV6();t.j41(0,"div",10)(1,"p",11),t.EFF(2,"m\xe1s"),t.k0s(),t.j41(3,"div",12)(4,"div",13)(5,"button",14),t.bIt("click",function(){t.eBV(s);const i=t.XpG();return t.Njj(i.cambiarPagina(i.paginaActual-1))}),t.EFF(6," \u2039 "),t.k0s(),t.DNE(7,y,3,2,"ng-container",6),t.j41(8,"button",14),t.bIt("click",function(){t.eBV(s);const i=t.XpG();return t.Njj(i.cambiarPagina(i.paginaActual+1))}),t.EFF(9," \u203a "),t.k0s()()()()}if(2&e){const s=t.XpG();t.R7$(5),t.Y8G("disabled",1===s.paginaActual),t.R7$(2),t.Y8G("ngForOf",s.paginasReducidas),t.R7$(),t.Y8G("disabled",s.paginaActual===s.totalPaginas)}}function I(e,p){1&e&&(t.j41(0,"div",19),t.nrm(1,"ion-icon",20),t.j41(2,"p"),t.EFF(3,"No tienes autos en tus favoritos todav\xeda."),t.k0s()())}const j=[{path:"",component:(()=>{var e;class p{constructor(o,i,n,c,g,T){this.menu=o,this.generalService=i,this.popoverCtrl=n,this.carsService=c,this.modalCtrl=g,this.router=T,this.autosFavoritos=[],this.autosFavoritosFiltrados=[],this.totalVehiculos=0,this.idsMisAutos=[],this.autosPaginados=[],this.paginaActual=1,this.paginas=[],this.totalPaginas=0,this.autosFavoritosIds=new Set,this.isLoggedIn=!1}ngOnInit(){this.generalService.valorGlobal$.subscribe(o=>{this.itemsPorPagina=o}),this.generalService.valorGlobal$.subscribe(o=>{this.itemsPorPagina=o}),this.generalService.tokenExistente$.subscribe(o=>{this.isLoggedIn=o}),this.getCarsFavoritos(),this.misAutos()}misAutos(){var o=this;return(0,b.A)(function*(){o.isLoggedIn&&o.carsService.misAutosId().subscribe({next:i=>{o.idsMisAutos=i&&Array.isArray(i.vehicleIds)&&i.vehicleIds.length>0?i.vehicleIds:[]},error:i=>{var n;const c=(null==i||null===(n=i.error)||void 0===n?void 0:n.message)||"Error al obtener tus veh\xedculos.";"No se encontraron veh\xedculos para este usuario"===c?o.idsMisAutos=[]:console.warn(c)}})})()}ngAfterViewInit(){this.getCarsFavoritos()}getCarsFavoritos(){this.carsService.getCarsFavoritos_all().subscribe({next:o=>{console.log("Autos favoritos obtenidos:",o),this.autosFavoritos=o,this.autosFavoritosFiltrados=[...o],this.totalVehiculos=this.autosFavoritos.length,this.calcularPaginacion(),this.misAutosid()},error:o=>{var i;const n=(null==o||null===(i=o.error)||void 0===i?void 0:i.message)||"Ocurri\xf3 un error inesperado";console.warn(n),"No hay veh\xedculos en la lista de deseos"===n&&(this.autosFavoritos=[],this.autosPaginados=[],this.totalVehiculos=0,this.paginas=[],this.totalPaginas=0)}})}calcularPaginacion(){this.totalPaginas=Math.ceil(this.autosFavoritosFiltrados.length/this.itemsPorPagina),this.paginas=Array.from({length:this.totalPaginas},(i,n)=>n+1),this.paginaActual=1,this.actualizarMotosPaginadas()}actualizarMotosPaginadas(){const o=(this.paginaActual-1)*this.itemsPorPagina;this.autosPaginados=this.autosFavoritosFiltrados.slice(o,o+this.itemsPorPagina)}cambiarPagina(o){this.paginaActual=o,this.actualizarMotosPaginadas(),setTimeout(()=>{var i;null===(i=this.pageContent)||void 0===i||i.scrollToTop(400)},100)}misAutosid(){this.carsService.misAutosId().subscribe({next:o=>{this.idsMisAutos=o&&Array.isArray(o.vehicleIds)&&o.vehicleIds.length>0?o.vehicleIds:[]},error:o=>{var i;const n=(null==o||null===(i=o.error)||void 0===i?void 0:i.message)||"Error al obtener tus veh\xedculos.";"No se encontraron veh\xedculos para este usuario"===n?this.idsMisAutos=[]:console.warn(n)}})}handleRefrescarAutos(o){this.getCarsFavoritos()}ordenarAutos(o){if(!this.autosFavoritosFiltrados||0===this.autosFavoritosFiltrados.length)return;const i=n=>{return Array.isArray(n.version)&&n.version.length>1?Math.min(...n.version.map(g=>g.Precio)):Array.isArray(n.version)&&1===n.version.length?(null===(c=n.version[0])||void 0===c?void 0:c.Precio)||0:n.precio||0;var c};"precioAsc"===o?this.autosFavoritosFiltrados.sort((n,c)=>i(n)-i(c)):"precioDesc"===o&&this.autosFavoritosFiltrados.sort((n,c)=>i(c)-i(n)),this.paginaActual=1,this.calcularPaginacion(),setTimeout(()=>{var n;null===(n=this.pageContent)||void 0===n||n.scrollToTop(400)},100)}esNumero(o){return"number"==typeof o}doRefresh(o){this.getCarsFavoritos(),this.generalService.valorGlobal$.subscribe(i=>{this.elementosPorPagina=i}),this.generalService.tokenExistente$.subscribe(i=>{this.isLoggedIn=i}),this.misAutos(),setTimeout(()=>{o.target.complete()},1500)}get paginasReducidas(){const o=this.totalPaginas,i=this.paginaActual;if(o<=2)return this.paginas;const c=[];c.push(1),i-1>2&&c.push("...");for(let g=Math.max(2,i-1);g<=Math.min(o-1,i+1);g++)c.push(g);return i+1<o-1&&c.push("..."),c.push(o),c}}return(e=p).\u0275fac=function(o){return new(o||e)(t.rXU(l._t),t.rXU(P.O),t.rXU(l.IE),t.rXU(u.R),t.rXU(l.W3),t.rXU(h.Ix))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-faviritos"]],viewQuery:function(o,i){if(1&o&&(t.GBs(C,5),t.GBs(C,5)),2&o){let n;t.mGM(n=t.lsd())&&(i.content=n.first),t.mGM(n=t.lsd())&&(i.pageContent=n.first)}},standalone:!1,decls:13,vars:6,consts:[["pageContent",""],[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],["pullingIcon","arrow-down-outline","refreshingSpinner","crescent","pullingText","Desliza para actualizar","refreshingText","Actualizando..."],[3,"ordenCambio","totalAutos","titulo"],[1,"catalogo-autos"],[4,"ngFor","ngForOf"],["class","contenedor-paginacion-ios",4,"ngIf"],["class","mensaje-vacio",4,"ngIf"],[3,"refrescarAutos","auto","ubicacion"],[1,"contenedor-paginacion-ios"],[1,"titulo-paginacion"],[1,"paginacion-scroll-ios"],[1,"paginacion-ios"],[1,"pagina-ios",3,"click","disabled"],["class","pagina-ios",3,"activa","click",4,"ngIf"],["class","ellipsis-ios",4,"ngIf"],[1,"pagina-ios",3,"click"],[1,"ellipsis-ios"],[1,"mensaje-vacio"],["name","heart-dislike","size","large","color","medium"]],template:function(o,i){if(1&o){const n=t.RV6();t.nrm(0,"app-navbar"),t.j41(1,"ion-content",1,0)(3,"ion-refresher",2),t.bIt("ionRefresh",function(g){return t.eBV(n),t.Njj(i.doRefresh(g))}),t.nrm(4,"ion-refresher-content",3),t.k0s(),t.j41(5,"app-acomodo",4),t.bIt("ordenCambio",function(g){return t.eBV(n),t.Njj(i.ordenarAutos(g))}),t.k0s(),t.j41(6,"ion-grid")(7,"div",5),t.DNE(8,F,2,2,"ng-container",6),t.k0s(),t.DNE(9,w,10,3,"div",7),t.nrm(10,"br")(11,"br"),t.k0s(),t.DNE(12,I,4,0,"div",8),t.k0s()}2&o&&(t.R7$(),t.Y8G("fullscreen",!0),t.R7$(4),t.Y8G("totalAutos",i.totalVehiculos)("titulo","Favoritos"),t.R7$(3),t.Y8G("ngForOf",i.autosPaginados),t.R7$(),t.Y8G("ngIf",i.totalPaginas>1),t.R7$(3),t.Y8G("ngIf",0===i.autosFavoritos.length))},dependencies:[a.Sq,a.bT,l.W9,l.lO,l.iq,l.To,l.Ki,m._,d.a,f.E],styles:['@charset "UTF-8";ion-content[_ngcontent-%COMP%]{--background: #f2f2f7;font-family:-apple-system,BlinkMacSystemFont,SF Pro Text,sans-serif}ion-grid[_ngcontent-%COMP%]{max-width:1100px;width:100%;margin:0 auto;padding:0 12px 20px}.catalogo-autos[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:14px;margin-top:14px;margin-bottom:20px}@media (max-width: 768px){.catalogo-autos[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(155px,1fr));gap:10px}}@media (max-width: 540px){.catalogo-autos[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:8px}}.catalogo-autos[_ngcontent-%COMP%]   app-cartas[_ngcontent-%COMP%]{display:block}.contenedor-paginacion-ios[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;margin-top:18px;padding-bottom:10px}.titulo-paginacion[_ngcontent-%COMP%]{margin:0 0 6px;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:.12em;color:#6b7280}.paginacion-scroll-ios[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;overflow-x:auto;padding-bottom:4px;scrollbar-width:thin;scrollbar-color:rgba(148,163,184,.9) transparent}.paginacion-scroll-ios[_ngcontent-%COMP%]::-webkit-scrollbar{height:5px}.paginacion-scroll-ios[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#94a3b8e6;border-radius:999px}.paginacion-ios[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:5px 6px;border-radius:999px;background:#fffffff5;backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);box-shadow:0 10px 22px #0f172a29,0 0 0 .5px #ffffffe6}.pagina-ios[_ngcontent-%COMP%]{min-width:32px;height:32px;padding:0 10px;border-radius:999px;border:none;outline:none;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:600;color:#111827;background:transparent;transition:background .18s ease,color .18s ease,transform .16s ease,box-shadow .16s ease}.pagina-ios[_ngcontent-%COMP%]:disabled{opacity:.35;cursor:default}.pagina-ios[_ngcontent-%COMP%]:not(.activa):not(:disabled):hover{background:#94a3b82e;transform:translateY(-1px)}.pagina-ios.activa[_ngcontent-%COMP%]{background:#ff3b30;color:#fff;box-shadow:0 8px 18px #ff3b308c;transform:translateY(-1px)}.ellipsis-ios[_ngcontent-%COMP%]{padding:0 6px;font-size:14px;color:#9ca3af;font-weight:500}.mensaje-vacio[_ngcontent-%COMP%]{text-align:center;margin-top:18vh;color:#6b7280;font-size:.95rem;padding:0 24px 32px;display:flex;flex-direction:column;align-items:center;gap:8px}.mensaje-vacio[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:52px;margin-bottom:4px;color:#d1d5db;filter:drop-shadow(0 4px 10px rgba(0,0,0,.1))}.mensaje-vacio[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;max-width:300px;line-height:1.45;font-weight:500}.filtros-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;align-items:center;--ion-grid-column-padding: 4px}.btn-fav[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;z-index:3}']}),p})()}];let k=(()=>{var e;class p{}return(e=p).\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[_.iI.forChild(j),_.iI]}),p})();var E=r(5473);let R=(()=>{var e;class p{}return(e=p).\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[a.MD,x.YN,l.bv,k,m._,d.a,f.E,E.n]}),p})()},7677:(M,v,r)=>{r.d(v,{E:()=>P});var a=r(1360),x=r(2881),l=r(7343),_=r(9417),b=r(5806);function t(u,h){if(1&u&&(a.j41(0,"div",10),a.EFF(1),a.k0s()),2&u){const m=a.XpG();a.R7$(),a.SpI(" ",m.titulo," ")}}let P=(()=>{var u;class h{constructor(d){this.generalService=d,this.totalAutos=null,this.titulo=null,this.ordenSeleccionado="nuevo",this.ordenCambio=new a.bkB,this.esDispositivoMovil=!1}ngOnInit(){this.generalService.dispositivo$.subscribe(d=>{this.esDispositivoMovil="telefono"===d||"tablet"===d})}onOrdenChange(d){const f=d.target.value;this.ordenSeleccionado=f,this.ordenCambio.emit(f)}}return(u=h).\u0275fac=function(d){return new(d||u)(a.rXU(b.O))},u.\u0275cmp=a.VBU({type:u,selectors:[["app-acomodo"]],inputs:{totalAutos:"totalAutos",titulo:"titulo"},outputs:{ordenCambio:"ordenCambio"},decls:17,vars:2,consts:[[1,"barra-superior"],[1,"resultado-cantidad"],["class","acomodo_titulo",4,"ngIf"],[1,"controles-derecha"],[1,"botones-vista"],["name","apps",1,"icono-vista","activo"],[1,"ordenador"],["placeholder","Seleccionar","interface","popover",3,"ionChange"],["value","precioAsc"],["value","precioDesc"],[1,"acomodo_titulo"]],template:function(d,f){1&d&&(a.j41(0,"div",0)(1,"div",1),a.EFF(2),a.j41(3,"span"),a.EFF(4,"Resultados"),a.k0s()(),a.DNE(5,t,2,1,"div",2),a.j41(6,"div",3)(7,"div",4),a.nrm(8,"ion-icon",5),a.k0s(),a.j41(9,"div",6)(10,"ion-label"),a.EFF(11,"Ordenar por:"),a.k0s(),a.j41(12,"ion-select",7),a.bIt("ionChange",function(F){return f.onOrdenChange(F)}),a.j41(13,"ion-select-option",8),a.EFF(14,"Precio menor"),a.k0s(),a.j41(15,"ion-select-option",9),a.EFF(16,"Precio mayor"),a.k0s()()()()()),2&d&&(a.R7$(2),a.SpI(" ",f.totalAutos," "),a.R7$(3),a.Y8G("ngIf",!f.esDispositivoMovil))},dependencies:[l.bv,l.iq,l.he,l.Nm,l.Ip,l.Je,x.MD,x.bT,_.X1],styles:['@charset "UTF-8";.barra-superior[_ngcontent-%COMP%]{position:sticky;top:0;z-index:20;display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap;padding:6px 12px;margin:0 -4px 6px;font-family:-apple-system,system-ui,BlinkMacSystemFont,SF Pro Text,Helvetica Neue,Arial,sans-serif;background:#f8f8fae6;backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);border-bottom:.5px solid rgba(60,60,67,.18);box-shadow:0 8px 18px #0f172a1f}@media (max-width: 768px){.barra-superior[_ngcontent-%COMP%]{padding:6px 10px;gap:8px}}.resultado-cantidad[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:4px;font-weight:700;font-size:16px;color:#111827}.resultado-cantidad[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:11px;text-transform:uppercase;letter-spacing:.06em;color:#6e6e73}@media (max-width: 768px){.resultado-cantidad[_ngcontent-%COMP%]{font-size:14px}.resultado-cantidad[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:10px;letter-spacing:.04em}}.acomodo_titulo[_ngcontent-%COMP%]{flex:1 1 auto;text-align:center;font-family:Poppins,-apple-system,BlinkMacSystemFont,system-ui,sans-serif;font-size:18px;font-weight:800;color:#a1a1aa;letter-spacing:.06em;text-transform:uppercase;white-space:nowrap}@media (max-width: 1024px){.acomodo_titulo[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 820px){.acomodo_titulo[_ngcontent-%COMP%]{font-size:12px}}.controles-derecha[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:10px;flex-wrap:nowrap}@media (max-width: 768px){.controles-derecha[_ngcontent-%COMP%]{margin-left:auto}}.botones-vista[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;padding:2px;border-radius:999px;background:#f2f2f7;border:1px solid rgba(60,60,67,.18);box-shadow:0 1px #fffc,0 2px 6px #0f172a1f}.icono-vista[_ngcontent-%COMP%]{width:26px;height:26px;border-radius:999px;display:flex;align-items:center;justify-content:center;font-size:15px;color:#6e6e73;cursor:pointer;transition:background .16s ease,color .16s ease,box-shadow .16s ease,transform .1s ease}@media (max-width: 768px){.icono-vista[_ngcontent-%COMP%]{width:24px;height:24px;font-size:13px}}.icono-vista.activo[_ngcontent-%COMP%]{background:#fff;color:#ff3b30;box-shadow:0 3px 8px #ff453a59;transform:translateY(-.5px)}.icono-vista[_ngcontent-%COMP%]:active{transform:translateY(.5px);box-shadow:0 1px 3px #0003}.ordenador[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:4px 10px;border-radius:999px;background:#fff;border:1px solid rgba(60,60,67,.16);box-shadow:0 8px 18px #0f172a29,0 0 0 .5px #ffffffe6;font-size:13px;white-space:nowrap}@media (max-width: 768px){.ordenador[_ngcontent-%COMP%]{padding:3px 8px;font-size:11px}}.ordenador[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin:0;font-weight:500;font-size:12px;color:#4b5563}@media (max-width: 768px){.ordenador[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:11px}}.ordenador[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{min-width:130px;font-size:13px;--padding-start: 8px;--padding-end: 4px;--min-height: 28px;--background: transparent;--color: #111827;--placeholder-color: #9ca3af;--placeholder-opacity: 1;--placeholder-font-weight: 400;--highlight-color-focused: transparent;--highlight-color: transparent;--icon-color: #9ca3af;--indicator-color: transparent;--border-color: transparent}@media (max-width: 768px){.ordenador[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{min-width:110px;font-size:11px}}']}),h})()}}]);