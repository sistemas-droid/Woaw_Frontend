"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5637],{5637:(L,m,i)=>{i.r(m),i.d(m,{UploadDocumentPageModule:()=>O});var g=i(2881),x=i(9417),c=i(7343),f=i(9870),u=i(467),o=i(1360),P=i(5035),v=i(2381),C=i(3184),b=i(9847),h=i(5473);function M(n,s){if(1&n&&(o.j41(0,"div",9)(1,"p")(2,"strong"),o.EFF(3,"Archivo seleccionado:"),o.k0s(),o.EFF(4),o.k0s()()),2&n){const d=o.XpG();o.R7$(4),o.SpI(" ",d.archivoSeleccionado.name,"")}}const D=[{path:"",component:(()=>{var n;class s{constructor(t,e,a,r,l,p){this.navCtrl=t,this.route=e,this.router=a,this.loteService=r,this.loadingCtrl=l,this.toastCtrl=p,this.nombreLote="",this.idLote="",this.tipoDocumento="",this.archivoSeleccionado=null,this.nombreDocumentoMostrar=""}ngOnInit(){this.route.paramMap.subscribe(t=>{var e,a,r;this.nombreLote=null!==(e=t.get("nombre"))&&void 0!==e?e:"",this.idLote=null!==(a=t.get("id"))&&void 0!==a?a:"",this.tipoDocumento=null!==(r=t.get("tipoDoc"))&&void 0!==r?r:"",this.nombreDocumentoMostrar=this.formatearTitulo(this.tipoDocumento)})}formatearTitulo(t){switch(t){case"constancia-fiscal":return"Constancia de Situaci\xf3n Fiscal";case"id-apoderado":return"Identificaci\xf3n del Apoderado";case"estado-cuenta-lote":case"estado-cuenta":return"Estado de Cuenta";case"acta-constitutiva":return"Acta Constitutiva";case"fotos-lote":return"Fotos del Lote";case"formato-aut-pf":return"Formato Autorizaci\xf3n Persona F\xedsica";case"formato-aut-pm":return"Formato Autorizaci\xf3n Persona Moral";default:return t}}onFileSelected(t){const e=t.target.files[0];this.archivoSeleccionado=null!=e?e:null}subirArchivo(){var t=this;return(0,u.A)(function*(){if(!t.archivoSeleccionado)return void t.mostrarToast("Selecciona un archivo antes de continuar.");const e=yield t.loadingCtrl.create({message:"Subiendo archivo...",spinner:"crescent"});let a;switch(yield e.present(),t.tipoDocumento){case"constancia-fiscal":a=t.loteService.subirConstanciaFiscal(t.idLote,t.archivoSeleccionado);break;case"id-apoderado":a=t.loteService.subirIdentificacionApoderado(t.idLote,t.archivoSeleccionado);break;case"estado-cuenta":case"estado-cuenta-lote":a=t.loteService.subirEstadoCuenta(t.idLote,t.archivoSeleccionado);break;case"acta-constitutiva":a=t.loteService.subirActaConstitutiva(t.idLote,t.archivoSeleccionado);break;case"fotos-lote":a=t.loteService.subirFotosLote(t.idLote,t.archivoSeleccionado);break;case"formato-aut-pf":a=t.loteService.subirFormatoAutPF(t.idLote,t.archivoSeleccionado);break;case"formato-aut-pm":a=t.loteService.subirFormatoAutPM(t.idLote,t.archivoSeleccionado);break;default:return t.mostrarToast("Tipo de documento no reconocido."),void e.dismiss()}var r;a.subscribe({next:(r=(0,u.A)(function*(l){yield e.dismiss(),t.mostrarToast("Documento subido con \xe9xito \u2714"),t.router.navigateByUrl(`/lote/documentos/${t.nombreLote}/${t.idLote}`)}),function(p){return r.apply(this,arguments)}),error:function(){var r=(0,u.A)(function*(l){console.error(l),yield e.dismiss(),t.mostrarToast("Error al subir documento \u274c")});return function(p){return r.apply(this,arguments)}}()})})()}mostrarToast(t){var e=this;return(0,u.A)(function*(){(yield e.toastCtrl.create({message:t,duration:2500,color:"dark",position:"bottom"})).present()})()}}return(n=s).\u0275fac=function(t){return new(t||n)(o.rXU(P.q9),o.rXU(v.nX),o.rXU(v.Ix),o.rXU(C.e),o.rXU(c.Xi),o.rXU(c.K_))},n.\u0275cmp=o.VBU({type:n,selectors:[["app-upload-document"]],standalone:!1,decls:22,vars:5,consts:[[3,"fullscreen"],[1,"ion-padding"],[1,"ion-text-center","ion-margin-bottom"],[1,"ion-text-bold"],[1,"ion-text-muted"],["type","file","accept",".pdf,.jpg,.jpeg,.png",3,"change"],["class","ion-text-center ion-margin-top",4,"ngIf"],["expand","block","color","danger",1,"ion-margin-top",3,"click","disabled"],["expand","block","fill","outline",1,"ion-margin-top",3,"click"],[1,"ion-text-center","ion-margin-top"]],template:function(t,e){1&t&&(o.nrm(0,"app-navbar"),o.j41(1,"ion-content",0)(2,"div",1)(3,"div",2)(4,"h1",3),o.EFF(5),o.k0s(),o.j41(6,"p",4),o.EFF(7,"Subir documento para el lote: "),o.j41(8,"strong"),o.EFF(9),o.k0s()()(),o.j41(10,"ion-card")(11,"ion-card-content")(12,"ion-item")(13,"ion-label"),o.EFF(14,"Seleccionar archivo"),o.k0s(),o.j41(15,"input",5),o.bIt("change",function(r){return e.onFileSelected(r)}),o.k0s()(),o.DNE(16,M,5,1,"div",6),o.j41(17,"ion-button",7),o.bIt("click",function(){return e.subirArchivo()}),o.EFF(18," Subir Documento "),o.k0s(),o.j41(19,"ion-button",8),o.bIt("click",function(){return e.router.navigateByUrl("/lote/documentos/"+e.nombreLote+"/"+e.idLote)}),o.EFF(20," Cancelar "),o.k0s()()()(),o.nrm(21,"app-footer"),o.k0s()),2&t&&(o.R7$(),o.Y8G("fullscreen",!0),o.R7$(4),o.JRh(e.nombreDocumentoMostrar),o.R7$(4),o.JRh(e.nombreLote),o.R7$(7),o.Y8G("ngIf",e.archivoSeleccionado),o.R7$(),o.Y8G("disabled",!e.archivoSeleccionado))},dependencies:[g.bT,c.Jm,c.b_,c.I9,c.W9,c.uz,c.he,b._,h.n],styles:['@charset "UTF-8";.ion-padding[_ngcontent-%COMP%]{width:100%;max-width:1100px;margin:0 auto}h1[_ngcontent-%COMP%]{font-size:26px;font-weight:800;letter-spacing:-.5px;margin-bottom:4px}.ion-text-muted[_ngcontent-%COMP%]{color:#6b7280;font-size:15px}ion-card[_ngcontent-%COMP%]{border-radius:14px;box-shadow:0 6px 18px #00000014;border:1px solid #e5e7eb;padding:6px;transition:.25s ease-in-out}ion-card[_ngcontent-%COMP%]:hover{box-shadow:0 10px 26px #0000001f;transform:translateY(-1px)}ion-item[_ngcontent-%COMP%]{--background: #fafafa;--border-radius: 12px;border:1px solid #e5e7eb;margin-top:10px}ion-item[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{margin-left:12px;font-size:14px;color:#444;padding:10px 0;cursor:pointer}ion-item[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]::-webkit-file-upload-button{background:var(--ion-color-danger);color:#fff;border:none;padding:6px 14px;border-radius:6px;font-size:13px;font-weight:600;cursor:pointer;-webkit-transition:.2s ease;transition:.2s ease}ion-item[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]::-webkit-file-upload-button:hover{background:#b40000}.archivo[_ngcontent-%COMP%]{font-size:15px;background:#f9fafb;padding:10px;border-radius:8px;border:1px solid #e5e7eb;display:inline-block;margin-top:10px}ion-button[_ngcontent-%COMP%]{--border-radius: 10px;font-weight:600;letter-spacing:.3px}ion-button[color=primary][_ngcontent-%COMP%]{--background: var(--ion-color-danger);--background-hover: #b30000}ion-button[fill=outline][_ngcontent-%COMP%]{--border-color: #111;--color: #111}ion-button[fill=outline][_ngcontent-%COMP%]:hover{--background: #f4f4f4}@media (max-width: 600px){h1[_ngcontent-%COMP%]{font-size:22px}ion-card[_ngcontent-%COMP%]{padding:0}}']}),s})()}];let F=(()=>{var n;class s{}return(n=s).\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.$C({type:n}),n.\u0275inj=o.G2t({imports:[f.iI.forChild(D),f.iI]}),s})();var S=i(1969),U=i(4371),k=i(2764),y=i(7677);let O=(()=>{var n;class s{}return(n=s).\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.$C({type:n}),n.\u0275inj=o.G2t({imports:[g.MD,x.YN,c.bv,F,b._,S.Z,U.a,y.E,h.n,k.B]}),s})()}}]);