"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8754],{8754:(X,m,c)=>{c.r(m),c.d(m,{DocumentosPageModule:()=>V});var u=c(2881),d=c(9417),a=c(7343),p=c(9870),o=c(1360),v=c(5035),g=c(2381),F=c(3184),f=c(9847),_=c(5473);function P(t,r){if(1&t&&(o.j41(0,"p",10),o.EFF(1),o.k0s()),2&t){const e=o.XpG(2);o.R7$(),o.SpI(" ",e.rfcError," ")}}function b(t,r){if(1&t){const e=o.RV6();o.j41(0,"div",4)(1,"ion-card")(2,"ion-card-header")(3,"ion-card-title",5),o.EFF(4," Validar RFC del Lote "),o.k0s(),o.j41(5,"ion-card-subtitle",5),o.EFF(6," Ingresa el RFC para determinar si eres Persona F\xedsica o Moral "),o.k0s()(),o.j41(7,"ion-card-content")(8,"ion-item")(9,"ion-label",6),o.EFF(10,"RFC del Lote"),o.k0s(),o.j41(11,"ion-input",7),o.mxI("ngModelChange",function(i){o.eBV(e);const s=o.XpG();return o.DH7(s.rfc,i)||(s.rfc=i),o.Njj(i)}),o.bIt("ionInput",function(){o.eBV(e);const i=o.XpG();return o.Njj(i.validarRFC())}),o.k0s()(),o.DNE(12,P,2,1,"p",8),o.j41(13,"ion-button",9),o.bIt("click",function(){o.eBV(e);const i=o.XpG();return o.Njj(i.enviarRFC())}),o.EFF(14," Continuar "),o.k0s()()()()}if(2&t){const e=o.XpG();o.R7$(11),o.R50("ngModel",e.rfc),o.R7$(),o.Y8G("ngIf",e.rfcError),o.R7$(),o.Y8G("disabled",!e.rfcValido)}}function x(t,r){1&t&&(o.j41(0,"span"),o.EFF(1,"Persona F\xedsica"),o.k0s())}function D(t,r){1&t&&(o.j41(0,"span"),o.EFF(1,"Persona Moral"),o.k0s())}function R(t,r){1&t&&(o.j41(0,"span"),o.EFF(1,"Personas F\xedsicas / Morales"),o.k0s())}function C(t,r){if(1&t&&(o.j41(0,"ion-card-subtitle"),o.DNE(1,x,2,0,"span",3)(2,D,2,0,"span",3)(3,R,2,0,"span",3),o.k0s()),2&t){const e=o.XpG(4);o.R7$(),o.Y8G("ngIf","fisica"===e.tipoPersona),o.R7$(),o.Y8G("ngIf","moral"===e.tipoPersona),o.R7$(),o.Y8G("ngIf",!e.tipoPersona)}}function I(t,r){if(1&t&&(o.j41(0,"ion-card-subtitle"),o.EFF(1),o.k0s()),2&t){const e=o.XpG(2).$implicit;o.R7$(),o.SpI(" ",e.subtitle," ")}}function E(t,r){if(1&t){const e=o.RV6();o.j41(0,"ion-col",23)(1,"ion-card",24),o.bIt("click",function(){o.eBV(e);const i=o.XpG().$implicit,s=o.XpG(2);return o.Njj(s.uploadDocument(i))}),o.j41(2,"ion-card-header")(3,"ion-card-title",25),o.nrm(4,"ion-icon",26),o.j41(5,"ion-text")(6,"h2",12),o.EFF(7),o.k0s()()(),o.DNE(8,C,4,3,"ion-card-subtitle",3)(9,I,2,1,"ion-card-subtitle",3),o.k0s(),o.j41(10,"ion-card-content")(11,"ion-badge",27),o.EFF(12),o.k0s()()()()}if(2&t){const e=o.XpG().$implicit;o.R7$(),o.AVh("ion-card-uploaded",e.uploaded),o.R7$(3),o.Y8G("name",e.icon),o.R7$(3),o.JRh(e.name),o.R7$(),o.Y8G("ngIf","formatos-autorizacion"===e.tipo),o.R7$(),o.Y8G("ngIf","formatos-autorizacion"!==e.tipo),o.R7$(2),o.Y8G("color",e.uploaded?"success":"warning"),o.R7$(),o.SpI(" ",e.uploaded?"Completado":"Pendiente"," ")}}function j(t,r){if(1&t&&(o.qex(0),o.DNE(1,E,13,8,"ion-col",22),o.bVm()),2&t){const e=r.$implicit,n=o.XpG(2);o.R7$(),o.Y8G("ngIf",!("acta-constitutiva"===e.tipo&&"moral"!==n.tipoPersona))}}function M(t,r){if(1&t){const e=o.RV6();o.j41(0,"div")(1,"div",11)(2,"ion-text")(3,"h1",12),o.EFF(4,"Documentaci\xf3n Requerida"),o.k0s()(),o.j41(5,"ion-text",13)(6,"p"),o.EFF(7,"Para completar tu solicitud, necesitamos los siguientes documentos"),o.k0s()(),o.j41(8,"ion-card",14)(9,"ion-card-content")(10,"div",11)(11,"ion-text")(12,"p",12),o.EFF(13),o.k0s()(),o.j41(14,"ion-text",15)(15,"p",12),o.EFF(16),o.k0s()()(),o.nrm(17,"ion-progress-bar",16),o.k0s()()(),o.j41(18,"ion-grid",17)(19,"ion-row",18),o.DNE(20,j,2,1,"ng-container",19),o.k0s()(),o.j41(21,"div",20)(22,"ion-button",21),o.bIt("click",function(){o.eBV(e);const i=o.XpG();return o.Njj(i.irAlLote())}),o.EFF(23),o.k0s()()()}if(2&t){const e=o.XpG();o.R7$(13),o.Lme(" Progreso: ",e.getUploadedCount(),"/",e.getTotalDocsRequeridos()," "),o.R7$(3),o.SpI("",e.getProgressPercentage(),"%"),o.R7$(),o.Y8G("value",e.getProgressPercentage()/100),o.R7$(3),o.Y8G("ngForOf",e.documents),o.R7$(3),o.SpI(' Ver lote "',e.nombreLote,'" ')}}const $=[{path:"",component:(()=>{var t;class r{constructor(n,i,s,l){this.navCtrl=n,this.router=i,this.route=s,this.loteService=l,this.nombreLote="",this.idLote="",this.rfc="",this.rfcError="",this.rfcValido=!1,this.yaIngresoRFC=!1,this.tipoPersona=null,this.mapaDocumentos={constanciaSituacionFiscal:"constancia-fiscal",identificacionApoderado:"id-apoderado",estadoCuentaLote:"estado-cuenta-lote",actaConstitutiva:"acta-constitutiva",fotosLote:"fotos-lote",formatoAutPF:"formatos-autorizacion",formatoAutPM:"formatos-autorizacion"},this.documents=[{tipo:"constancia-fiscal",name:"Constancia de Situaci\xf3n Fiscal",subtitle:"Constancia",icon:"document",uploaded:!1},{tipo:"id-apoderado",name:"Identificaci\xf3n del Apoderado",subtitle:"INE o Pasaporte Vigente",icon:"card",uploaded:!1},{tipo:"estado-cuenta-lote",name:"Estado de Cuenta Lote",subtitle:"Con CLABE interbancaria",icon:"wallet",uploaded:!1},{tipo:"acta-constitutiva",name:"Acta Constitutiva / Asamblea",subtitle:"Solo para persona Moral",icon:"document",uploaded:!1},{tipo:"fotos-lote",name:"Fotos del Lote",subtitle:"Interior y exterior\u2026",icon:"camera",uploaded:!1},{tipo:"formatos-autorizacion",name:"Formatos de Autorizaci\xf3n",subtitle:"Personas F\xedsicas / Morales",icon:"hammer",uploaded:!1}]}ngOnInit(){this.route.paramMap.subscribe(n=>{var i,s;this.nombreLote=null!==(i=n.get("nombre"))&&void 0!==i?i:"",this.idLote=null!==(s=n.get("id"))&&void 0!==s?s:"",this.idLote&&(this.cargarRFCDesdeBackend(),this.cargarDocumentosSubidos())})}cargarRFCDesdeBackend(){this.loteService.getLoteById(this.idLote).subscribe({next:n=>{const i=(null==n?void 0:n.rfc)||"";i&&(this.rfc=i,this.validarRFC(),this.yaIngresoRFC=!0)},error:n=>console.error("Error cargando RFC:",n)})}cargarDocumentosSubidos(){this.loteService.getLoteById(this.idLote).subscribe({next:n=>{Object.keys((null==n?void 0:n.documentosVerificacion)||{}).forEach(s=>{const l=this.mapaDocumentos[s];if(!l)return;const h=this.documents.find(z=>z.tipo===l);h&&(h.uploaded=!0)})},error:n=>console.error("Error cargando documentos:",n)})}validarRFC(){const n=this.rfc.trim().length;13===n?(this.tipoPersona="fisica",this.rfcValido=!0,this.rfcError=""):12===n?(this.tipoPersona="moral",this.rfcValido=!0,this.rfcError=""):(this.tipoPersona=null,this.rfcValido=!1,this.rfcError="Debe tener 12 (Moral) o 13 (F\xedsica) caracteres.")}enviarRFC(){this.rfcValido&&this.loteService.detectarRFC(this.idLote,this.rfc).subscribe({next:()=>this.yaIngresoRFC=!0,error:()=>this.rfcError="Error al enviar RFC."})}uploadDocument(n){let i=n.tipo;"formatos-autorizacion"===n.tipo&&(i="fisica"===this.tipoPersona?"formato-aut-pf":"formato-aut-pm"),this.router.navigateByUrl(`/lote/upload-document/${this.nombreLote}/${this.idLote}/${i}`)}getTotalDocsRequeridos(){return"fisica"===this.tipoPersona?this.documents.filter(n=>"acta-constitutiva"!==n.tipo).length:this.documents.length}getUploadedCount(){return("fisica"===this.tipoPersona?this.documents.filter(i=>"acta-constitutiva"!==i.tipo):this.documents).filter(i=>i.uploaded).length}getProgressPercentage(){const n=this.getTotalDocsRequeridos();return 0===n?0:Math.round(this.getUploadedCount()/n*100)}irAlLote(){!this.nombreLote||!this.idLote||this.router.navigateByUrl(`/lote/${this.nombreLote}/${this.idLote}`)}}return(t=r).\u0275fac=function(n){return new(n||t)(o.rXU(v.q9),o.rXU(g.Ix),o.rXU(g.nX),o.rXU(F.e))},t.\u0275cmp=o.VBU({type:t,selectors:[["app-documentos"]],standalone:!1,decls:6,vars:3,consts:[[3,"fullscreen"],[1,"ion-padding"],["class","ion-margin-bottom",4,"ngIf"],[4,"ngIf"],[1,"ion-margin-bottom"],[1,"ion-text-center"],["position","floating"],["maxlength","13","clearInput","",3,"ngModelChange","ionInput","ngModel"],["style","color:red; margin-top:8px; font-size:14px;",4,"ngIf"],["expand","block","color","danger",1,"ion-margin-top",3,"click","disabled"],[2,"color","red","margin-top","8px","font-size","14px"],[1,"ion-text-center","ion-margin-bottom"],[1,"ion-text-bold"],["color","medium"],[1,"ion-margin-vertical"],["color","danger"],["color","danger",3,"value"],[1,"docs-grid","ion-margin-bottom"],[1,"docs-row"],[4,"ngFor","ngForOf"],[1,"volver-container"],["expand","block","color","danger","fill","solid",1,"btn-volver",3,"click"],["size","12","size-sm","6","size-md","4","size-lg","3","class","docs-col",4,"ngIf"],["size","12","size-sm","6","size-md","4","size-lg","3",1,"docs-col"],[1,"ion-card-document",3,"click"],[1,"ion-align-items-center","card-title"],["slot","start",1,"ion-icon-document",3,"name"],[1,"ion-margin-top",3,"color"]],template:function(n,i){1&n&&(o.nrm(0,"app-navbar"),o.j41(1,"ion-content",0)(2,"div",1),o.DNE(3,b,15,3,"div",2)(4,M,24,6,"div",3),o.k0s(),o.nrm(5,"app-footer"),o.k0s()),2&n&&(o.R7$(),o.Y8G("fullscreen",!0),o.R7$(2),o.Y8G("ngIf",!i.yaIngresoRFC),o.R7$(),o.Y8G("ngIf",i.yaIngresoRFC))},dependencies:[u.Sq,u.bT,d.BC,d.tU,d.vS,a.In,a.Jm,a.b_,a.I9,a.ME,a.HW,a.tN,a.hU,a.W9,a.lO,a.iq,a.$w,a.uz,a.he,a.FH,a.ln,a.IO,a.Gw,f._,_.n],styles:['@charset "UTF-8";.docs-grid[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.docs-row[_ngcontent-%COMP%]{justify-content:center;gap:20px}.docs-col[_ngcontent-%COMP%]{display:flex}.ion-card-document[_ngcontent-%COMP%]{width:100%;min-height:200px;display:flex;flex-direction:column;justify-content:space-between;border:1px solid #ddd;border-radius:14px;transition:.25s ease-in-out;background:#fff}.ion-card-document[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 6px 20px #00000026;border-color:var(--ion-color-danger)}.ion-card-uploaded[_ngcontent-%COMP%]{border:2px solid var(--ion-color-success);background:#2ecc7114}.card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-weight:700;font-size:18px;color:#111}.ion-icon-document[_ngcontent-%COMP%]{font-size:26px;color:var(--ion-color-danger)}.volver-container[_ngcontent-%COMP%]{margin-top:40px;text-align:center}.btn-volver[_ngcontent-%COMP%]{--border-radius: 10px;--background: var(--ion-color-danger);font-weight:600}.ion-padding[_ngcontent-%COMP%]{width:100%;max-width:1500px;margin:0 auto}']}),r})()}];let G=(()=>{var t;class r{}return(t=r).\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.$C({type:t}),t.\u0275inj=o.G2t({imports:[p.iI.forChild($),p.iI]}),r})();var k=c(1969),L=c(4371),y=c(2764),T=c(7677);let V=(()=>{var t;class r{}return(t=r).\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.$C({type:t}),t.\u0275inj=o.G2t({imports:[u.MD,d.YN,a.bv,G,f._,k.Z,L.a,T.E,_.n,y.B]}),r})()}}]);