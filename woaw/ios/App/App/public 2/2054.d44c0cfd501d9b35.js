"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2054],{2054:(V,f,r)=>{r.r(f),r.d(f,{NuevosPageModule:()=>S});var u=r(2881),N=r(9417),p=r(7343),h=r(9870),v=r(467),C=r(7051),o=r(1360),F=r(5806),y=r(9557),b=r(2381),j=r(7636),_=r(9847),x=r(4371),P=r(7677),M=r(1969),A=r(8857);const G=["pageContent"];function I(a,l){if(1&a&&o.nrm(0,"app-spinner",11),2&a){const n=o.XpG();o.Y8G("tipo",n.tipo_spinner)("text",n.texto_spinner)("sub_text",n.textoSub_spinner)}}function O(a,l){if(1&a){const n=o.RV6();o.qex(0),o.j41(1,"app-cartas",12),o.bIt("refrescarAutos",function(i){o.eBV(n);const s=o.XpG();return o.Njj(s.handleRefrescarAutos(i))}),o.k0s(),o.bVm()}if(2&a){const n=l.$implicit,t=o.XpG();o.R7$(),o.Y8G("auto",n)("autosFavoritosIds",t.autosFavoritosIds)("ubicacion","m-nuevos")("esMio",t.idsMisMotos.includes(n._id))}}function R(a,l){if(1&a){const n=o.RV6();o.j41(0,"button",20),o.bIt("click",function(){o.eBV(n);const i=o.XpG().$implicit,s=o.XpG(2);return o.Njj(s.cambiarPagina(i))}),o.EFF(1),o.k0s()}if(2&a){const n=o.XpG().$implicit,t=o.XpG(2);o.AVh("activa",t.paginaActual===n),o.R7$(),o.SpI(" ",n," ")}}function $(a,l){1&a&&(o.j41(0,"span",21),o.EFF(1,"..."),o.k0s())}function T(a,l){if(1&a&&(o.qex(0),o.DNE(1,R,2,3,"button",18)(2,$,2,0,"span",19),o.bVm()),2&a){const n=l.$implicit,t=o.XpG(2);o.R7$(),o.Y8G("ngIf",t.esNumero(n)),o.R7$(),o.Y8G("ngIf",!t.esNumero(n))}}function k(a,l){if(1&a){const n=o.RV6();o.j41(0,"div",13)(1,"p",14),o.EFF(2,"M\xe1s"),o.k0s(),o.j41(3,"div",15)(4,"div",16)(5,"button",17),o.bIt("click",function(){o.eBV(n);const i=o.XpG();return o.Njj(i.cambiarPagina(i.paginaActual-1))}),o.EFF(6," \u2039 "),o.k0s(),o.DNE(7,T,3,2,"ng-container",9),o.j41(8,"button",17),o.bIt("click",function(){o.eBV(n);const i=o.XpG();return o.Njj(i.cambiarPagina(i.paginaActual+1))}),o.EFF(9," \u203a "),o.k0s()()()()}if(2&a){const n=o.XpG();o.R7$(5),o.Y8G("disabled",1===n.paginaActual),o.R7$(2),o.Y8G("ngForOf",n.paginasReducidas),o.R7$(),o.Y8G("disabled",n.paginaActual===n.totalPaginas)}}const X=[{path:"",component:(()=>{var a;class l{constructor(t,i,s,e,c,g,d,m){this.menu=t,this.generalService=i,this.popoverCtrl=s,this.carsService=e,this.modalCtrl=c,this.router=g,this.route=d,this.motosService=m,this.esDispositivoMovil=!1,this.autosAmostrar=[],this.totalMotos=0,this.MisMotos=[],this.idsMisMotos=[],this.autosFiltrados=[],this.autosFavoritosIds=new Set,this.filtros=[{label:"$",tipo:"precio"},{label:"Color",tipo:"color"},{label:"Marca",tipo:"marca"}],this.filtrosAplicados={precio:null,anio:null,color:null,marca:null},this.motosFiltradas=[],this.paginaActual=1,this.totalPaginas=1,this.paginas=[],this.motosPaginadas=[],this.mostrar_spinner=!1,this.tipo_spinner=0,this.texto_spinner="Cargando...",this.textoSub_spinner="Espere un momento"}ngOnInit(){this.generalService.dispositivo$.subscribe(t=>{this.esDispositivoMovil="telefono"===t||"tablet"===t}),this.generalService.valorGlobal$.subscribe(t=>{this.itemsPorPagina=t,this.misMotos()})}misMotos(){var t=this;return(0,v.A)(function*(){t.mostrar_spinner=!0,t.motosService.getMotos().subscribe({next:i=>{const s=(null==i?void 0:i.motos)||[];t.MisMotos=s,t.motosFiltradas=[...s],t.totalMotos=t.MisMotos.length,t.calcularPaginacion(),t.getCarsFavoritos(),t.misAutosid(),t.mostrar_spinner=!1},error:i=>{var s;t.mostrar_spinner=!1;const e=(null==i||null===(s=i.error)||void 0===s?void 0:s.message)||"Error al obtener tus veh\xedculos.";"No se encontraron veh\xedculos para este usuario"===e?t.MisMotos=[]:console.warn(e)}})})()}getCarsFavoritos(){this.carsService.getCarsFavoritos().subscribe({next:t=>{const i=t.vehicles.map(s=>s.vehicleId);this.autosFavoritosIds=new Set(i)},error:t=>{}})}misAutosid(){this.carsService.misAutosId().subscribe({next:t=>{this.idsMisMotos=t&&Array.isArray(t.vehicleIds)&&t.vehicleIds.length>0?t.vehicleIds:[]},error:t=>{var i;const s=(null==t||null===(i=t.error)||void 0===i?void 0:i.message)||"Error al obtener tus veh\xedculos.";"No se encontraron veh\xedculos para este usuario"===s?this.idsMisMotos=[]:console.warn(s)}})}regresar(){this.router.navigate(["/home"])}handleRefrescarAutos(t){this.misMotos()}calcularPaginacion(){this.totalPaginas=Math.ceil(this.motosFiltradas.length/this.itemsPorPagina),this.paginas=Array.from({length:this.totalPaginas},(i,s)=>s+1),this.paginaActual=1,this.actualizarMotosPaginadas()}actualizarMotosPaginadas(){const t=(this.paginaActual-1)*this.itemsPorPagina;this.motosPaginadas=this.motosFiltradas.slice(t,t+this.itemsPorPagina)}cambiarPagina(t){this.paginaActual=t,this.actualizarMotosPaginadas(),setTimeout(()=>{var i;null===(i=this.pageContent)||void 0===i||i.scrollToTop(400)},100)}ordenarAutos(t){!this.MisMotos||0===this.MisMotos.length||("precioAsc"===t?this.motosFiltradas.sort((i,s)=>i.precio-s.precio):"precioDesc"===t&&this.motosFiltradas.sort((i,s)=>s.precio-i.precio),this.paginaActual=1,this.calcularPaginacion(),setTimeout(()=>{var i;null===(i=this.pageContent)||void 0===i||i.scrollToTop(400)},100))}mostrarOpciones(t,i){var s=this;return(0,v.A)(function*(){const e=yield s.popoverCtrl.create({component:C.s,event:t,translucent:!0,componentProps:{tipo:i,extra:"motos"}});yield e.present();const{data:c}=yield e.onDidDismiss();s.filtrosAplicados[i]=null===c?null:c,s.aplicarFiltros()})()}aplicarFiltros(){this.motosFiltradas=this.MisMotos.filter(t=>{const i=this.filtrosAplicados.precio,s=this.filtrosAplicados.anio,e=this.filtrosAplicados.color,c=this.filtrosAplicados.marca,g=!i||Array.isArray(i.rango)&&2===i.rango.length&&t.precio>=i.rango[0]&&t.precio<=i.rango[1],d=!s||t.anio===Number(s),m=!e||Array.isArray(t.color)&&t.color.some(D=>D.toLowerCase().trim()===e.label.toLowerCase().trim()),Y=!c||t.marca.toLowerCase().trim()===c.label.toLowerCase().trim();return g&&d&&m&&Y}),this.totalMotos=this.motosFiltradas.length,this.paginaActual=1,this.calcularPaginacion()}resetearFiltros(){this.filtrosAplicados={precio:null,anio:null,color:null,marca:null},this.aplicarFiltros()}esNumero(t){return"number"==typeof t}get paginasReducidas(){const t=this.totalPaginas,i=this.paginaActual;if(t<=2)return this.paginas;const e=[];e.push(1),i-1>2&&e.push("...");for(let c=Math.max(2,i-1);c<=Math.min(t-1,i+1);c++)e.push(c);return i+1<t-1&&e.push("..."),e.push(t),e}}return(a=l).\u0275fac=function(t){return new(t||a)(o.rXU(p._t),o.rXU(F.O),o.rXU(p.IE),o.rXU(y.R),o.rXU(p.W3),o.rXU(b.Ix),o.rXU(b.nX),o.rXU(j.A))},a.\u0275cmp=o.VBU({type:a,selectors:[["app-nuevos"]],viewQuery:function(t,i){if(1&t&&o.GBs(G,5),2&t){let s;o.mGM(s=o.lsd())&&(i.pageContent=s.first)}},standalone:!1,decls:19,vars:8,consts:[["pageContent",""],[1,"contenido-ios",3,"fullscreen"],[3,"tipo","text","sub_text",4,"ngIf"],[3,"ordenCambio","totalAutos","titulo"],[1,"contenedor-catalogo-ios"],["size","12","size-md","3"],[3,"mostrarOpciones","limpiarFiltros","filtros","filtrosAplicados"],["size","12","size-md","9"],[1,"catalogo-autos-ios"],[4,"ngFor","ngForOf"],["class","contenedor-paginacion-ios",4,"ngIf"],[3,"tipo","text","sub_text"],[3,"refrescarAutos","auto","autosFavoritosIds","ubicacion","esMio"],[1,"contenedor-paginacion-ios"],[1,"titulo-paginacion-ios"],[1,"paginacion-scroll-ios"],[1,"paginacion-ios"],[1,"pagina-ios",3,"click","disabled"],["class","pagina-ios",3,"activa","click",4,"ngIf"],["class","ellipsis-ios",4,"ngIf"],[1,"pagina-ios",3,"click"],[1,"ellipsis-ios"]],template:function(t,i){if(1&t){const s=o.RV6();o.nrm(0,"app-navbar"),o.EFF(1," <<<<<<< HEAD\n"),o.j41(2,"ion-content",1,0),o.DNE(4,I,1,3,"app-spinner",2),o.j41(5,"app-acomodo",3),o.bIt("ordenCambio",function(c){return o.eBV(s),o.Njj(i.ordenarAutos(c))}),o.k0s(),o.j41(6,"ion-grid",4)(7,"ion-row")(8,"ion-col",5)(9,"app-menu",6),o.bIt("mostrarOpciones",function(c){return o.eBV(s),o.Njj(i.mostrarOpciones(c.event,c.tipo))})("limpiarFiltros",function(){return o.eBV(s),o.Njj(i.resetearFiltros())}),o.k0s()(),o.j41(10,"ion-col",7)(11,"div",8),o.DNE(12,O,2,4,"ng-container",9),o.k0s(),o.DNE(13,k,10,3,"div",10),o.k0s()()(),o.nrm(14,"br")(15,"br")(16,"br")(17,"br")(18,"br"),o.k0s()}2&t&&(o.R7$(2),o.Y8G("fullscreen",!0),o.R7$(2),o.Y8G("ngIf",i.mostrar_spinner),o.R7$(),o.Y8G("totalAutos",i.totalMotos)("titulo","Motos"),o.R7$(4),o.Y8G("filtros",i.filtros)("filtrosAplicados",i.filtrosAplicados),o.R7$(3),o.Y8G("ngForOf",i.motosPaginadas),o.R7$(),o.Y8G("ngIf",i.totalPaginas>1))},dependencies:[u.Sq,u.bT,p.hU,p.W9,p.lO,p.ln,_._,x.a,P.E,M.Z,A.t],styles:['@charset "UTF-8";.contenido-ios[_ngcontent-%COMP%]{--background: #f2f2f7;font-family:-apple-system,BlinkMacSystemFont,SF Pro Text,sans-serif}.contenedor-catalogo-ios[_ngcontent-%COMP%]{max-width:1100px;width:100%;margin:0 auto;padding:0 12px 20px}.catalogo-autos-ios[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:14px;margin-top:14px;margin-bottom:20px}@media (max-width: 768px){.catalogo-autos-ios[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(155px,1fr));gap:10px}}@media (max-width: 540px){.catalogo-autos-ios[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:8px}}.catalogo-autos-ios[_ngcontent-%COMP%]   app-cartas[_ngcontent-%COMP%]{display:block}.contenedor-paginacion-ios[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;margin-top:18px;padding-bottom:10px}.titulo-paginacion-ios[_ngcontent-%COMP%]{margin:0 0 6px;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:.12em;color:#6b7280}.paginacion-scroll-ios[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;overflow-x:auto;padding-bottom:4px;scrollbar-width:thin;scrollbar-color:rgba(148,163,184,.9) transparent}.paginacion-scroll-ios[_ngcontent-%COMP%]::-webkit-scrollbar{height:5px}.paginacion-scroll-ios[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#94a3b8e6;border-radius:999px}.paginacion-ios[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:5px 6px;border-radius:999px;background:#fffffff5;backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);box-shadow:0 10px 22px #0f172a29,0 0 0 .5px #ffffffe6}.pagina-ios[_ngcontent-%COMP%]{min-width:32px;height:32px;padding:0 10px;border-radius:999px;border:none;outline:none;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:600;color:#111827;background:transparent;transition:background .18s ease,color .18s ease,transform .16s ease,box-shadow .16s ease}.pagina-ios[_ngcontent-%COMP%]:disabled{opacity:.35;cursor:default}.pagina-ios[_ngcontent-%COMP%]:not(.activa):not(:disabled):hover{background:#94a3b82e;transform:translateY(-1px)}.pagina-ios.activa[_ngcontent-%COMP%]{background:#ff3b30;color:#fff;box-shadow:0 8px 18px #ff3b308c;transform:translateY(-1px)}.ellipsis-ios[_ngcontent-%COMP%]{padding:0 6px;font-size:14px;color:#9ca3af;font-weight:500}']}),l})()}];let E=(()=>{var a;class l{}return(a=l).\u0275fac=function(t){return new(t||a)},a.\u0275mod=o.$C({type:a}),a.\u0275inj=o.G2t({imports:[h.iI.forChild(X),h.iI]}),l})();var w=r(5473);let S=(()=>{var a;class l{}return(a=l).\u0275fac=function(t){return new(t||a)},a.\u0275mod=o.$C({type:a}),a.\u0275inj=o.G2t({imports:[u.MD,N.YN,p.bv,E,_._,x.a,P.E,w.n,M.Z,A.t]}),l})()}}]);