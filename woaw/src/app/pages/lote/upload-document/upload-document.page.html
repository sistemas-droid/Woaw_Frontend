<app-navbar></app-navbar>

<ion-content [fullscreen]="true">
  <div class="ion-padding">

    <!-- TÃ­tulo -->
    <div class="ion-text-center ion-margin-bottom page-title-box">
      <h1 class="ion-text-bold titulo-woaw">{{ nombreDocumentoMostrar }}</h1>
      <p class="ion-text-muted subtitulo-woaw">
        Subir documento para el lote: <strong>{{ nombreLote }}</strong>
      </p>
    </div>

    <ion-card class="upload-card">
      <ion-card-content>

        <!-- Campo de archivo con enlace al documento actual -->
        <ion-item lines="none" class="file-item">

          <ion-label class="file-label">Seleccionar archivo</ion-label>

          <!-- ðŸ‘‰ Desktop: Link + Tachita dentro del item -->
          <div *ngIf="documentoActualUrl && documentoActualNombre" class="file-link-wrapper">
            <span class="file-link" (click)="abrirDocumento()">
              {{ documentoActualNombre }}
            </span>

            <button type="button" class="file-delete-btn" (click)="eliminarDocumento($event)">
              âœ•
            </button>
          </div>

          <!-- Input file -->
          <input type="file" (change)="onFileSelected($event)" accept=".pdf,.jpg,.jpeg,.png" />

        </ion-item>

        <!-- ðŸ‘‰ Mobile: Link + X ABAJO -->
        <div *ngIf="documentoActualUrl && documentoActualNombre" class="file-link-mobile">
          <span class="file-link" (click)="abrirDocumento()">
            {{ documentoActualNombre }}
          </span>

          <button type="button" class="file-delete-btn" (click)="eliminarDocumento($event)">
            âœ•
          </button>
        </div>

        <!-- Mostrar archivo seleccionado -->
        <div class="ion-text-center ion-margin-top" *ngIf="archivoSeleccionado">
          <p class="archivo-info">
            <strong>Archivo seleccionado:</strong> {{ archivoSeleccionado.name }}
          </p>
        </div>

        <!-- BotÃ³n subir -->
        <div class="botones-desktop">
          <ion-button expand="block" class="btn-subir" [disabled]="!archivoSeleccionado" (click)="subirArchivo()">
            SUBIR DOCUMENTO
          </ion-button>

          <ion-button expand="block" fill="outline" class="btn-cancelar"
            (click)="router.navigateByUrl('/lote/documentos/' + nombreLote + '/' + idLote)">
            CANCELAR
          </ion-button>
        </div>


      </ion-card-content>
    </ion-card>

  </div>

  <app-footer></app-footer>
</ion-content>