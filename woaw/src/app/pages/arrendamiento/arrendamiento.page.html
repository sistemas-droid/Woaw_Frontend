<app-navbar></app-navbar>

<ion-content [fullscreen]="true" class="arrendamiento-ios" #contenidoScroll>

  <!-- üéØ Hero de arrendamiento en mood iOS -->
  <div class="hero-arr-ios">
    <img
      src="/assets/autos/publicidad/arrendamiento.webp"
      alt="Fondo arrendamiento"
      class="hero-img-ios"
    />

    <div class="hero-overlay-ios">
      <h1>Arrendamiento Puro</h1>
      <p>
        Elige la opci√≥n que m√°s se adapte a tu negocio o estilo de vida. Con Wo-Aw
        puedes arrendar f√°cilmente un coche o un cami√≥n, sin complicaciones.
      </p>
    </div>
  </div>

  <!-- PRIMER BLOQUE (COCHES / CAMIONES) -->
  <section class="contenedor_primero_ios" *ngIf="!selecionaVehiculo">
    <div class="columna-izquierda">
      <h2>Arrendamiento Puro</h2>
      <p>
        Elige la opci√≥n que m√°s se adapte a tu negocio o estilo de vida. Con
        Wo-Aw puedes arrendar f√°cilmente un coche o un cami√≥n, sin
        complicaciones.
      </p>
    </div>

    <div class="columna-derecha">
      <div class="card-opcion-ios">
        <img class="img_coche" src="/assets/autos/arre1.webp" alt="Coche" />
        <h3>COCHES</h3>
        <p>Veh√≠culos ideales para uso personal o corporativo.</p>
        <button class="btn-card-ios" (click)="cambiarTipo('coches')">
          Arrendar Coche
        </button>
      </div>

      <div class="card-opcion-ios">
        <img class="img_camion" src="/assets/autos/arre2.webp" alt="Cami√≥n" />
        <h3>CAMIONES</h3>
        <p>Soluciones de transporte para empresas y log√≠stica.</p>
        <button class="btn-card-ios" (click)="cambiarTipo('camiones')">
          Arrendar Cami√≥n
        </button>
      </div>
    </div>
  </section>

  <!-- BLOQUE DE MARCAS + FORM -->
  <section class="contenedor_arrendamiento" *ngIf="selecionaVehiculo">
    <div id="top-seccion-arrendamiento-marcas" class="contenedor-arrendamiento-ios">
      <p class="titulo_seccion_ios">{{ tipoSeleccionado }}</p>

      <div class="encabezado-arrendamiento-ios">
        <!-- Botones regresar -->
        <button class="btn-regresar-ios" *ngIf="!mostrarModelos" (click)="regresarAntes()">
          <ion-icon name="arrow-back-outline"></ion-icon>
          Regresar
        </button>
        <button class="btn-regresar-ios" *ngIf="mostrarModelos" (click)="regresar()">
          <ion-icon name="arrow-back-outline"></ion-icon>
          Regresar
        </button>

        <img
          *ngIf="mostrarModelos"
          class="img_logo_ios"
          [src]="marcaSeleccionada?.imageUrl"
          [alt]="marcaSeleccionada?.nombre"
          loading="lazy"
        />

        <!-- Buscador -->
        <div class="buscador-ios" *ngIf="!mostrarModelos">
          <ion-icon name="search-outline"></ion-icon>
          <input
            type="text"
            placeholder="Buscar marca..."
            [(ngModel)]="terminoBusqueda"
            (ngModelChange)="onBuscar($event)"
          />
        </div>
      </div>

      <!-- LISTA DE MARCAS -->
      <ng-container *ngIf="!mostrarModelos">
        <div class="contenedor-marcas-ios">
          <ng-container *ngIf="tipoSeleccionado === 'coches'">
            <ng-container *ngFor="let marca of filteredOpciones">
              <div
                class="marca-card-ios"
                *ngIf="marca.imagenValida"
                [class.seleccionado]="marca.key === marcaSeleccionada?.key"
                (click)="seleccionarMarca(marca)"
              >
                <img
                  [src]="marca.imageUrl"
                  [alt]="marca.nombre"
                  (error)="marca.imagenValida = false"
                />
                <span class="marca-nombre-grid" [title]="marca.nombre">
                  {{ marca.nombre }}
                </span>
              </div>
            </ng-container>
          </ng-container>

          <ng-container *ngIf="tipoSeleccionado === 'camiones'">
            <ng-container *ngFor="let marca of filteredOpcionesCamiones">
              <div
                class="marca-card-ios"
                *ngIf="marca.imagenValida"
                [class.seleccionado]="marca._id === marcaSeleccionada?._id"
                (click)="seleccionarMarca(marca)"
              >
                <img
                  [src]="marca.imageUrl"
                  [alt]="marca.nombre"
                  (error)="marca.imagenValida = false"
                />
                <span class="marca-nombre-grid" [title]="marca.nombre">
                  {{ marca.nombre }}
                </span>
              </div>
            </ng-container>
          </ng-container>
        </div>

        <!-- CTA SELECCIONAR MARCA / MODELO -->
        <div class="contenedor-arrendar-grid-ios">
          <div class="info-coche" *ngIf="marcaSeleccionada">
            <img
              [src]="marcaSeleccionada.imageUrl"
              [alt]="marcaSeleccionada.nombre"
              class="logo-marca"
            />
            <h4 class="nombre-marca">{{ marcaSeleccionada.nombre }}</h4>
          </div>

          <div
            class="cta-arrendar-ios"
            *ngIf="marcaSeleccionada"
            (click)="confirmarArrendamiento()"
          >
            <span class="texto-arrendar">
              Selecciona <strong>Modelo</strong>
            </span>
            <ion-icon name="chevron-forward-outline" class="icono-flecha"></ion-icon>
          </div>

          <div
            class="cta-arrendar-ios cta-muted"
            *ngIf="!marcaSeleccionada"
            (click)="selecionaMarca()"
          >
            <span class="texto-arrendar">
              Selecciona <strong>Marca</strong>
            </span>
            <ion-icon name="arrow-up-circle-outline" class="icono-flecha-arriba"></ion-icon>
          </div>
        </div>
      </ng-container>

      <!-- FORMULARIO (igual, solo se apoya en estilos iOS ya hechos) -->
      <ng-container *ngIf="mostrarModelos">
        <div class="contenedor-modelos-ios">
          <form [formGroup]="formArrendamiento" (ngSubmit)="enviarSolicitud('Email')">
            <!-- ‚ö†Ô∏è Tu ion-grid y todo el form van igual ‚Üí
                 no los toco para no chingar tu l√≥gica  -->
            <!-- ... DEJAS AQU√ç TAL CUAL TU <ion-grid> Y DEM√ÅS ... -->
            <!-- solo usar√° los estilos .wo-control, etc., que ya est√°n bonitos -->

            <!-- pegaste todo el ion-grid completo aqu√≠ sin cambios -->
            <!--  üîªüîªüîª -->
            <!-- (mant√©n tu ion-grid, ion-row, ion-col y botones como los tienes) -->
            <!--  üî∫üî∫üî∫ -->
          </form>
        </div>
      </ng-container>
    </div>

    <div #infoArrendamiento></div>
  </section>

  <!-- SECCI√ìN ABAJO (GRID INFO) ‚Äì esta ya casi era iOS, solo la limpiamos en CSS -->
  <section class="grid-arrendamiento-ios despues_de_imagen">
    <ion-grid>
      <ion-row>
        <ion-col size="12" size-md="4">
          <div class="tarjeta-arr-ios">
            <h5><ion-icon name="car-sport-outline"></ion-icon> ¬øQU√â ES?</h5>
            <p>
              El arrendamiento puro te permite utilizar un auto nuevo pagando
              una renta mensual, sin adquirir deuda ni comprometer tu flujo de
              efectivo. Ideal para empresas y profesionistas con beneficios
              fiscales.
            </p>
          </div>
        </ion-col>

        <ion-col size="12" size-md="4">
          <div class="tarjeta-arr-ios">
            <h5><ion-icon name="thumbs-up-outline"></ion-icon> BENEFICIOS</h5>
            <ul>
              <li><ion-icon name="checkmark-circle-outline"></ion-icon> 100% deducible en impuestos</li>
              <li><ion-icon name="cash-outline"></ion-icon> Inversi√≥n inicial baja</li>
              <li><ion-icon name="wallet-outline"></ion-icon> Financiaci√≥n completa del veh√≠culo</li>
              <li><ion-icon name="close-circle-outline"></ion-icon> No se registra como deuda</li>
              <li><ion-icon name="locate-outline"></ion-icon> Incluye GPS de monitoreo</li>
              <li><ion-icon name="calendar-outline"></ion-icon> Plazos de 12 a 60 meses</li>
            </ul>
          </div>
        </ion-col>

        <ion-col size="12" size-md="4">
          <div class="tarjeta-arr-ios">
            <h5><ion-icon name="document-text-outline"></ion-icon> REQUISITOS</h5>
            <ul>
              <li><ion-icon name="document-outline"></ion-icon> Llenar solicitud</li>
              <li><ion-icon name="business-outline"></ion-icon> RFC y constancia de situaci√≥n fiscal</li>
              <li><ion-icon name="card-outline"></ion-icon> Identificaci√≥n oficial</li>
              <li><ion-icon name="home-outline"></ion-icon> Comprobante de domicilio</li>
              <li><ion-icon name="bar-chart-outline"></ion-icon> Opini√≥n positiva del SAT</li>
            </ul>
          </div>
        </ion-col>
      </ion-row>
    </ion-grid>
  </section>

  <app-footer></app-footer>
</ion-content>
