<app-navbar></app-navbar>

<ion-content
  [fullscreen]="true"
  [scrollEvents]="true"
  class="ios-content"
>

  <div class="home-shell">

    <!-- =========================
         HERO WEB (NO NATIVO)
    ========================== -->
    <section class="woaw-bg" *ngIf="!isNative">
      <div class="overlay-container" [class.transitioning]="transitioning">

        <!-- Overlay actual -->
        <div
          class="overlay"
          [class.loaded]="overlayLoaded"
          [ngStyle]="overlayLoaded ? {
            'background-image':
              'linear-gradient(to bottom, rgba(255, 255, 255, 0) 75%, #ffffff00 100%), url(' + imgenPrincipal + ')',
            'background-size': 'cover',
            'background-position': '50% 95%',
            'background-repeat': 'no-repeat'
          } : {}"
        ></div>

        <!-- Overlay siguiente -->
        <div
          class="overlay next-overlay"
          *ngIf="siguienteImagen"
          [style.background-image]="'linear-gradient(to bottom, rgba(255, 255, 255, 0) 75%, #ffffff00 100%), url(' + siguienteImagen + ')'"
        ></div>

      </div>

      <!-- Vidrio + contenido -->
      <div class="buscador-container" [class.loaded]="overlayLoaded">
        <div class="contenido-principal">
          <div class="bloque-contenido ios-glass">
            <h1 class="titulo typing">{{ textoAnimado }}</h1>

            <div class="buscador-box">
              <ion-searchbar
                mode="ios"
                [(ngModel)]="terminoBusqueda"
                (ionInput)="onInputChange($event)"
                (keyup.enter)="irABusqueda(terminoBusqueda)"
                placeholder="Escribe lo que buscas..."
                animated="true"
                class="buscador"
              ></ion-searchbar>
            </div>

            <!-- Chips tipos -->
            <div class="tipos-vehiculos">
              <div class="lista-tipos">
                <button
                  type="button"
                  class="tipo-card"
                  *ngFor="let tipo of TiposVeiculo"
                  (click)="buscarPorTipo(tipo)"
                >
                  {{ tipo }}
                </button>
              </div>
            </div>

            <!-- Marcas top -->
            <div class="top-marcas">
              <img
                src="https://storage.googleapis.com/wo-aw/uploads/marcas/nissan-1752250741191.png"
                (click)="irABusqueda('nissan')"
                alt="Nissan"
                loading="lazy"
              />
              <img
                src="https://storage.googleapis.com/wo-aw/uploads/marcas/chevrolet-1752250726132.png"
                (click)="irABusqueda('Chevrolet')"
                alt="Chevrolet"
                loading="lazy"
              />
              <img
                src="https://storage.googleapis.com/wo-aw/uploads/marcas/honda-1752250731294.png"
                (click)="irABusqueda('Honda')"
                alt="Honda"
                loading="lazy"
              />
              <img
                src="https://storage.googleapis.com/wo-aw/uploads/marcas/volkswagen-1752250719366.png"
                (click)="irABusqueda('Volkswagen')"
                alt="Volkswagen"
                loading="lazy"
              />
              <img
                src="https://storage.googleapis.com/wo-aw/uploads/marcas/kia-1752250740506.png"
                (click)="irABusqueda('Kia')"
                alt="Kia"
                loading="lazy"
              />
              <img
                src="https://storage.googleapis.com/wo-aw/uploads/marcas/hyundai-1752250721333.png"
                (click)="irABusqueda('Hyundai')"
                alt="Hyundai"
                loading="lazy"
              />
              <img
                src="https://storage.googleapis.com/wo-aw/uploads/marcas/bmw-1752250746130.png"
                (click)="irABusqueda('bmw')"
                alt="BMW"
                loading="lazy"
              />
            </div>

          </div>
        </div>
      </div>
    </section>

    <!-- =========================
         HERO NATIVO (main)
    ========================== -->
    <section class="native-hero" *ngIf="isNative">
      <div class="native-hero__content">
        <div
          class="native-hero__bg-img"
          [ngStyle]="{ 'background-image': 'url(' + heroImage + ')' }"
        ></div>

        <div class="native-hero__copy">
          <h1 class="native-hero__title">Compra y acelera</h1>
          <p class="native-hero__subtitle">Encuentra tu próximo auto en segundos.</p>
        </div>

        <div class="native-hero__brands">
          <div class="brand" (click)="irABusqueda('nissan')">
            <img src="https://storage.googleapis.com/wo-aw/uploads/marcas/nissan-1752250741191.png" alt="Nissan" />
          </div>
          <div class="brand" (click)="irABusqueda('chevrolet')">
            <img src="https://storage.googleapis.com/wo-aw/uploads/marcas/chevrolet-1752250726132.png" alt="Chevrolet" />
          </div>
          <div class="brand" (click)="irABusqueda('honda')">
            <img src="https://storage.googleapis.com/wo-aw/uploads/marcas/honda-1752250731294.png" alt="Honda" />
          </div>
          <div class="brand" (click)="irABusqueda('volkswagen')">
            <img src="https://storage.googleapis.com/wo-aw/uploads/marcas/volkswagen-1752250719366.png" alt="Volkswagen" />
          </div>
          <div class="brand" (click)="irABusqueda('kia')">
            <img src="https://storage.googleapis.com/wo-aw/uploads/marcas/kia-1752250740506.png" alt="Kia" />
          </div>
          <div class="brand" (click)="irABusqueda('hyundai')">
            <img src="https://storage.googleapis.com/wo-aw/uploads/marcas/hyundai-1752250721333.png" alt="Hyundai" />
          </div>
          <div class="brand" (click)="irABusqueda('bmw')">
            <img src="https://storage.googleapis.com/wo-aw/uploads/marcas/bmw-1752250746130.png" alt="BMW" />
          </div>
        </div>

        <div class="native-hero__cta">
          <button class="cta-primary" type="button" (click)="redirecion('/new-car')">
            Publica tu vehículo
            <ion-icon name="arrow-forward-outline"></ion-icon>
          </button>

          <button class="cta-ghost" type="button" (click)="redirecion('/arrendamiento')">
            Arrendamiento
          </button>
        </div>

      </div>
    </section>

    <!-- =========================
         PRINCIPAL
    ========================== -->
    <app-principal #principal></app-principal>

    <!-- =========================
         VIDEO SECTION (iOS card)
    ========================== -->
    <section class="video-wrap">
      <video
        #videoEl
        class="video"
        [src]="videoSrc"
        autoplay
        muted
        loop
        playsinline
        preload="auto"
        poster="assets/img/poster.jpg"
      ></video>

      <div class="overlay">
        <img
          src="assets/icon/logo4.png"
          alt="Logo woaw"
          class="logo-goautos2"
          loading="lazy"
        />
        <h1 class="headline">Encuentra tu siguiente vehículo</h1>
        <p class="subheadline">Coches, seminuevos y camiones.</p>
      </div>
    </section>

    <!-- =========================
         MENSAJE APP
    ========================== -->
    <section class="seccion-app-mensaje">
      <div class="contenedor-app-mensaje">
        <h2 class="titulo-app">
          Woaw te ayuda a <br />
          comprar o vender tu auto <br />
          desde la <span>palma de tu mano</span><br />
          de forma segura
        </h2>
      </div>
    </section>

    <button class="btn_conocenos" routerLink="/conocenos" type="button">
      Conócenos
    </button>

    <br /><br />

    <app-footer></app-footer>

  </div>

</ion-content>

<button
  class="btn-flotante"
  *ngIf="mostrarBotonFlotante && !esDispositivoMovil"
  (click)="scrollAPrincipal()"
>
  {{ botonFlotanteTexto }}
</button>