<app-navbar></app-navbar>

<ion-content [fullscreen]="true" class="ios-polizas">

<section class="cta-section">
  <ion-button fill="clear" class="btn-regresar" (click)="redirigir('/home')">
    <ion-icon name="arrow-back-outline"></ion-icon>
  </ion-button>
</section>

  <section class="polizas-section">


    <header class="cotiza__head">
      <h1>PÃ³lizas</h1>
    </header>

    <div class="logos-wrapper">
      <a href="https://www.crabi.com/" target="_blank">
        <img src="/assets/icon/crabi1.png" alt="Logo Crabi" class="logo" />
      </a>
      <span class="slash"></span>
      <a href="https://wo-aw.com/" target="_blank">
        <img src="/assets/icon/logo2.png" alt="Logo Woaw" class="logo" />
      </a>
    </div>

    <!-- ðŸ§® CONTADOR -->
    <section class="stats-section" aria-label="Resumen de pÃ³lizas">
      <div class="stat">
        <span class="label">Total de pÃ³lizas: {{ totalPolizas }}</span>
      </div>
      <ng-template #dash><div class="num">â€”</div></ng-template>
    </section>
    <!-- /CONTADOR -->
<div class="cards-wrap" *ngIf="!cargando && polizas.length; else estado">
  <div
  
    class="poliza-card"
    *ngFor="let p of polizas; let i = index; trackBy: trackById"
  > <footer class="card-footer">
      <span class="numero-ficha">PÃ³liza # {{ i + 1 }}</span>
    </footer>
   
    <span (click)="detallesPoliza(p)">
      <header class="card-head">
        <h3 class="folio">{{ folioOf(p) }}</h3>
        <span class="plan tiny-pill">{{ planOf(p) }}</span>
      </header>

      <div class="kv">
        <div class="row">
          <span class="label">Vigencia</span>
          <span
            class="value"
            *ngIf="vigenciaInicioOf(p) || vigenciaFinOf(p); else sinVig"
          >
            <ng-container *ngIf="vigenciaInicioOf(p) as vi">
              {{ vi | date:"d 'de' MMMM 'de' y" }}
            </ng-container>
            <ng-container *ngIf="vigenciaInicioOf(p) && vigenciaFinOf(p)">
              â€“
            </ng-container>
            <ng-container *ngIf="vigenciaFinOf(p) as vf">
              {{ vf | date:"d 'de' MMMM 'de' y" }}
            </ng-container>
          </span>
          <ng-template #sinVig>â€”</ng-template>
        </div>

        <div class="row">
          <span class="label">VIN/Auto</span>
          <span class="value">{{ vehiculoOf(p) }}</span>
        </div>

        <div class="row">
          <span class="label">RFC</span>
          <span class="value value--mono">{{ rfcOf(p) }}</span>
        </div>

        <div class="row">
          <span class="label">Placa</span>
          <span class="value">
            <span class="placa-pill">{{ placasOf(p) }}</span>
          </span>
        </div>
      </div>
    </span>

    <!-- ðŸ§¾ Pie de nÃºmero -->
    
  </div>
</div>


    <ng-template #estado>
      <div class="state">
        <ion-spinner name="crescent" *ngIf="cargando"></ion-spinner>
        <p *ngIf="!cargando">No hay pÃ³lizas.</p>
      </div>
    </ng-template>
  </section>

</ion-content>
