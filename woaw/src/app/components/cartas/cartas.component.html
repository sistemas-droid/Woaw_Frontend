<div class="card-ios" (click)="onCardClick(auto, $event)">

  <!-- Botón de favorito iOS -->
  <button class="fav-btn" *ngIf="ubicacion !== 'favoritos'" 
          (click)="agregarAFavoritos(auto._id); $event.stopPropagation()">
    <ion-icon [name]="autosFavoritosIds.has(auto._id) ? 'heart' : 'heart-outline'"></ion-icon>
  </button>

  <!-- Botón borrar favoritos -->
  <button class="fav-btn delete" *ngIf="ubicacion === 'favoritos'"
          (click)="eliminarDeFavoritos(auto._id); $event.stopPropagation()">
    <ion-icon name="trash-outline"></ion-icon>
  </button>

  <!-- Imagen -->
  <div class="img-box">
    <img
      [src]="auto.imagenes[0]"
      [alt]="auto.modelo"
      loading="lazy"
      (load)="onImagenCargada()"
      (error)="imagenCargada = true"
      [class.oculta]="!imagenCargada"
    />

    <div class="loading" *ngIf="!imagenCargada">
      <ion-spinner name="crescent"></ion-spinner>
    </div>
  </div>

  <!-- Info -->
  <div class="info-box">
    <h4 class="title">
      {{ auto.marca }} • {{ auto.modelo }} {{ auto.anio }}
    </h4>

    <!-- Precio -->
    <p class="price" *ngIf="!FormatoPrecios">
      {{ auto?.version?.length > 1 ?
      ('Desde ' + (obtenerPrecioMinimo(auto.version) | currency:'MXN':'symbol':'1.0-0')) :
      (auto.version?.[0]?.Precio | currency:'MXN':'symbol':'1.0-0') }}
    </p>

    <p class="price" *ngIf="FormatoPrecios">
      {{ auto.precio.porDia | currency:'MXN':'symbol':'1.0-0' }}
    </p>

    <!-- Specs -->
    <div class="specs">
      <span *ngIf="auto.kilometraje">{{ auto.kilometraje | number }} km</span>
      <span *ngIf="auto.transmision">{{ auto.transmision }}</span>
      <span *ngIf="auto.ubicacion?.ciudad">{{ auto.ubicacion.ciudad }}</span>
    </div>

  </div>
</div>
