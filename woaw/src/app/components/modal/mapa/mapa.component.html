<ion-header translucent class="map-header-ios">
  <!-- Grabber tipo sheet iOS -->
  <div class="grabber-ios"></div>

  <!-- Toolbar título -->
  <ion-toolbar color="light" class="toolbar-ios">
    <ion-title>Ubicación</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="cancelar()" aria-label="Cerrar">
        <ion-icon name="close-outline" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>

  <!-- Barra de búsqueda -->
  <ion-toolbar color="light" class="toolbar-search-ios">
    <ion-searchbar
      class="search-ios"
      placeholder="Buscar dirección, colonia o lugar..."
      [debounce]="250"
      (ionInput)="onInputChange($event)"
      showCancelButton="never"
      animated
      #inputDireccion
    >
    </ion-searchbar>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="map-content-ios">
  <!-- Texto informativo -->
  <ion-text color="medium" class="texto-busqueda">
    Escribe el lugar, calle, colonia o ciudad para buscar.
  </ion-text>

  <!-- Leyenda -->
  <div class="legend-ubicacion">
    <div class="legend-item">
      <span class="dot dot-green"></span>
      <span>Mi ubicación</span>
    </div>

    <div class="legend-item">
      <ion-icon name="location-sharp" class="pin"></ion-icon>
      <span>Ubicación a seleccionar (toca el mapa)</span>
    </div>
  </div>

  <!-- Mapa -->
  <div class="map-wrapper">
    <!-- Spinner -->
    <div *ngIf="cargandoMapa" class="spinner-cargando">
      <ion-spinner name="crescent" color="primary"></ion-spinner>
      <p class="txt-spinner">Cargando mapa...</p>
    </div>

    <!-- Mapa real -->
    <div #mapContainer class="map-container" [hidden]="cargandoMapa"></div>
  </div>
</ion-content>

<!-- Footer con dirección y CTA -->
<ion-footer class="map-footer-ios">
  <ion-toolbar>
    <div class="footer-inner-ios">
      <div class="direccion-footer">
        {{ direccionCompleta }}
      </div>

      <ion-button
        color="danger"
        fill="solid"
        [disabled]="!ubicacionLugarInvalida"
        (click)="confirmarUbicacion()"
      >
        {{ textoBoton }}
      </ion-button>
    </div>
  </ion-toolbar>
</ion-footer>
