/* ===========================
   BASE HEADER / TOOLBAR iOS
=========================== */

ion-header {
  --background: transparent;
  --border-color: transparent;
}

/* toolbar tipo iOS: blur, claro, sombra suave */
.ios-toolbar {
  --background: rgba(249, 249, 252, 0.94);
  --color: #111827;
  --border-color: rgba(0, 0, 0, 0.06);

  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  box-shadow: 0 1px 0 rgba(15, 23, 42, 0.06);

  padding-inline: 12px;
  min-height: 58px;

  display: flex;
  align-items: center;
  justify-content: space-between;

  padding-top: env(safe-area-inset-top, 0);
}

@media (min-width: 768px) {
  .ios-toolbar {
    min-height: 64px;
    padding-inline: 18px;
  }
}

/* ===========================
   LEFT: LOGO + BUSCADOR
=========================== */

.logo_content {
  display: flex;
  align-items: center;
  gap: 8px;
}

.btn-back-logo {
  --padding-start: 0px;
  --padding-end: 0px;
  --background: transparent;
  --background-activated: rgba(17, 24, 39, 0.06);
  --border-radius: 999px;
}

.icon-back {
  font-size: 22px;
  margin-right: 4px;
  color: #111827;
}

.logo_content .logo {
  width: clamp(64px, 9vw, 92px);
  height: auto;
  object-fit: contain;
  cursor: pointer;
}

/* Botón lupa/cerrar móvil */
.btn-buscar {
  --padding-start: 4px;
  --padding-end: 4px;
  --background: transparent;
  --background-activated: rgba(17, 24, 39, 0.06);
  --color: #111827;
  --border-radius: 999px;
}

.btn-buscar ion-icon {
  font-size: 22px;
}

/* ===========================
   SEARCHBAR ESTILO iOS
=========================== */

.buscador-container {
  position: relative;
  display: flex;
  align-items: center;

  margin-left: 8px;
  flex: 0 1 auto;
  min-width: 0;

  width: clamp(150px, 26vw, 320px);
  transition: width 0.25s ease;
}

.buscador-container:focus-within {
  width: clamp(200px, 36vw, 460px);
}

/* Variante móvil: ocupa más ancho */
.buscador-container--movil {
  width: clamp(220px, 70vw, 420px);
}

@media (max-width: 820px) {
  .buscador-container {
    width: clamp(140px, 45vw, 260px);
  }

  .buscador-container:focus-within {
    width: clamp(180px, 70vw, 310px);
  }
}

.buscador-container ion-searchbar {
  --height: 34px;
  --background: #f2f2f7;
  --color: #111827;

  --placeholder-color: #9ca3af;
  --icon-color: #9ca3af;
  --clear-button-color: #9ca3af;

  --box-shadow: none;
  --border-radius: 999px;

  border-radius: 999px;
  overflow: hidden;
  border: 1px solid rgba(148, 163, 184, 0.55);
}

.buscador-container:focus-within ion-searchbar {
  border-color: #ff3b30;
  box-shadow: 0 0 0 1px rgba(255, 59, 48, 0.25);
}

/* ===========================
   RIGHT: BOTONES DESKTOP
=========================== */

ion-buttons[slot='end'] {
  display: flex;
  align-items: center;
  gap: 4px;
  flex-wrap: nowrap;
}

/* Botones desktop */
ion-buttons[slot='end'] ion-button {
  --background: transparent;
  --background-activated: rgba(17, 24, 39, 0.06);
  --padding-start: 6px;
  --padding-end: 6px;

  --color: #3e4857;
  text-transform: none;
  font-size: 13px;
  font-weight: 500;

  min-height: 34px;
  --border-radius: 999px;
}

/* íconos dentro de botones (sin romper texto) */
ion-buttons[slot='end'] ion-button ion-icon {
  font-size: 17px;
}

@media (max-width: 900px) {
  ion-buttons[slot='end'] ion-button {
    font-size: 12px;
  }
}

/* activo tipo iOS: texto rojo + subrayado suave */
ion-buttons[slot='end'] .activo {
  --color: #ff3b30;
  font-weight: 700;
  position: relative;
}

ion-buttons[slot='end'] .activo::after {
  content: '';
  position: absolute;
  left: 14%;
  right: 14%;
  bottom: 2px;
  height: 2px;
  border-radius: 999px;
  background: #ff3b30;
}

/* ===========================
   BOTÓN PUBLICAR (pill rojo)
=========================== */

.btn-vender {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;

  background: #ff3b30;
  color: #ffffff;

  font-weight: 700;
  font-size: 13px;

  padding: 0 16px;
  height: 34px;

  border: none;
  border-radius: 999px;
  cursor: pointer;
  white-space: nowrap;

  box-shadow: 0 8px 18px rgba(255, 59, 48, 0.32);
  transition: transform 0.16s ease, box-shadow 0.18s ease, filter 0.18s ease;
}

.btn-vender ion-icon {
  font-size: 18px;
}

.btn-vender:hover {
  transform: translateY(-1px);
  filter: brightness(1.06);
  box-shadow: 0 11px 24px rgba(255, 59, 48, 0.4);
}

.activo-btn-new {
  box-shadow: 0 0 0 2px rgba(255, 59, 48, 0.35);
}

/* ===========================
   INFO DE USUARIO
=========================== */

.usuario-info {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-left: 8px;
  cursor: pointer;
}

.usuario-info .icono-bandera {
  width: 20px;
  height: auto;
  border-radius: 2px;
}

.usuario-info .contenedor-nombre {
  display: flex;
  align-items: center;
  gap: 6px;
}

.usuario-info .avatar {
  width: 20px;
  height: 20px;
  border-radius: 999px;
  object-fit: cover;
}

.usuario-info .icono-user {
  font-size: 18px;
  color: #4b5563;
}

.usuario-info .nombre-usuario {
  font-size: 13px;
  color: #111827;
  font-weight: 500;
  white-space: nowrap;
}

/* ===========================
   NAV MÓVIL (stack buttons)
=========================== */

ion-toolbar ion-button.stack {
  --background: transparent;
  --background-activated: rgba(17, 24, 39, 0.06);
  --padding-start: 4px;
  --padding-end: 4px;
  --border-radius: 999px;

  min-width: 40px;
}

ion-toolbar ion-button.stack .vcol {
  display: inline-flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 2px;
  line-height: 1;
}

ion-toolbar ion-button.stack ion-icon {
  font-size: 18px;
  color: #4b5563;
}

ion-toolbar ion-button.stack .label {
  font-size: 10px;
  color: #6b7280;
}

@media (max-width: 820px) {
  ion-toolbar ion-button.stack .label {
    font-size: 9px;
  }
}

/* activo en móvil */
ion-toolbar ion-button.stack.activo ion-icon,
ion-toolbar ion-button.stack.activo .label {
  color: #ff3b30;
}

/* ===========================
   SUBMENÚ AUTOS (popover)
   (lo dejo tal cual, iOS clean)
=========================== */

.submenu-coches {
  position: absolute;
  top: 60px;
  right: 160px;

  display: flex;
  flex-direction: column;
  background: #ffffff;

  border-radius: 14px;
  padding: 10px;

  box-shadow: 0 14px 30px rgba(15, 23, 42, 0.26);
  z-index: 999;
  border: 1px solid rgba(148, 163, 184, 0.5);
}

.submenu-coches ion-button {
  --background: transparent;
  --background-activated: rgba(17, 24, 39, 0.06);
  --color: #111827;

  --padding-start: 10px;
  --padding-end: 10px;

  font-size: 14px;
  text-transform: none;
}

.submenu-coches ion-button:hover {
  --background: #f3f4f6;
}

/* ===========================
   XS EXTRA PEQUEÑO
=========================== */

@media (max-width: 400px) {
  .ios-toolbar {
    padding-inline: 8px;
  }

  .logo_content .logo {
    width: clamp(46px, 18vw, 64px);
  }

  ion-buttons[slot='end'] ion-button {
    font-size: 11px;
  }
}

/* accesibilidad: menos animaciones */
@media (prefers-reduced-motion: reduce) {
  .buscador-container,
  .buscador-container ion-searchbar,
  .btn-vender {
    transition: none !important;
  }
}